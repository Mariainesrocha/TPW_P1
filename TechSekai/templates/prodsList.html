{% extends "mainLayout.html" %}
{% load auth_extras %}
{% block main %}
    <div class="container" style="padding-top: 5%; padding-bottom: 3%">
        <div class="cat-blocks-container" style="text-align: center">
        {% for p in products %}
            {% if request.user|has_group:"shops" %}
                {% addstr '/products/edit/' p.id as myurl %}
            {% else %}
                {% addstr '/product/' p.id  as  myurl %}
            {% endif %}
            {% if forloop.first %} <div class="row justify-content-evenly"> {% endif %}
                <div class="col-lg-3 col-md-6 d-flex align-items-stretch">
                        <div class="product">
                            <figure class="product-media">
                                <a href="{{ myurl }}/">
                                    <img src="/media/{{ p.image }}" alt="Product image" style="height: 200px;width: 100%;" class="img-fluid">
                                </a>
                            </figure><!-- End .product-media -->
                            <div class="product-body" style="background: #23272b">
                                <div class="product-cat">
                                    <a>{{ p.category.name }}</a>
                                </div><!-- End .product-cat -->
                                <h2 class="product-title" style="color: white"><a>{{ p.name }}</a></h2>
                                <a href="{{ myurl }}/" >Open Product</a>
                            </div><!-- End .product-body -->
                        </div><!-- End .product -->
                </div>
            {% if forloop.counter|divisibleby:4 %} </div><div class="row">{% endif %}
            {% if forloop.last %}</div>{% endif %}
            {% empty %}
                <p class="btn btn-danger disabled btn-lg" style="color: white; margin-bottom: 10px; border-radius: 10px;"> Sorry, no products available! </p>
                <br>
        {% endfor %}
        </div><!-- End .cat-blocks-container -->
    </div><!-- End .container -->
{% endblock %}
